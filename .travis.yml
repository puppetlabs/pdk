sudo: false
language: ruby
bundler_args: "--without development"
script:
  - cat Gemfile.lock
  - bundle list
  - bundle exec rake $CHECK
before_install:
  - if [ $BUNDLER_VERSION ]; then
      gem install -v $BUNDLER_VERSION bundler --no-document;
    else
      gem install bundler --no-document;
    fi
cache: bundler
matrix:
  include:
    - rvm: 2.4.3
      env: CHECK=rubocop
    - rvm: 2.4.3
      env: CHECK=acceptance:local
    - rvm: 2.4.3
      env: CHECK=spec:coverage
    - rvm: 2.4.3
      env: CHECK=license_finder
      bundler_args: "" # license_finder requires all gems installed
    - rvm: 2.5
      env: CHECK=spec
    - rvm: 2.3
      env: CHECK=spec
    - rvm: 2.1.9
      env: CHECK=spec BUNDLER_VERSION=1.17.3
branches:
  only:
    - master
notifications:
  slack:
    secure: CxyJOhkvh2HpH7q4NMthxGIwh/ALVQrfAUrTumInDvXB11G0JiBLV7JZLRVOC5VUhlLe+WQhehdGpYVxbA2Fo6ituTnCrF5J7v02gawGiGL7CIpWzN4F8RAtXQUhJvXztBUrRxleZ0EF2VbIohnfZJa6/M7SChJD90j1JLZkaXRS464364XEuEhZVUbouTBrtLKYwtnfWSkP7o/fBSXqeChRfJwhSuq521dsbEeOp/qIk618IE49Saf0eWhqDHuGwqqaicUV55j9andoc56kePfhRgCHeK6J89paUccrOGsTUBHYH3Dw5rWNc0Li0K2/5NWpZ2CB/0pko1HB1HKrmXEnks111W9XaUIekM5lwSyHRA+2GTPQrIRZYFhkbws22i3YRDO7g3QQimnto8VU2RIdBc0FnAz88WbbhYLjaY7eqtceDeNgu63AIn9WFs7058bWqyq03945AdBTjDvc83TAwmmDDVEnxaWUIyBA2qTsDmicHhTxwGyM2v4bG6OyFifceGj8yD54rdp/QzdptNmjleIyUiwC452rZP6YCPdE1a6q8pTkAAEVfsESX+FzUQeJZFqbVMLJ49TispQMZ2lx/9sgA4CN40WM3jzAYiIw5TPsCMFDKhtuVEZNV32NgUxdUulaAabZxZ7z1f1y9sOQh1S3y95j4T/WGALFaVo=
